<!doctype html>
<html>
<head>
  <title>GPT粵語文章生成器</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script
    src="https://code.jquery.com/jquery-3.7.0.min.js"
    integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
    crossorigin="anonymous"></script>

  <style>
  </style>
</head>
<body class="p-8">

  <div id="app" class="container mx-auto max-w-2xl">

    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold">GPT 粵語文章生成器</h1>
        <p class="text-gray-500">利用 AI 及 粵拼學習粵語</p>
    </div>

    <div id="input-form">
        
        <select id="topic" class="w-full p-2.5 border mb-4">
            <option selected value="">選擇主題</option>
        </select>

        <div class="flex mb-4 p-2.5">
            <div class="flex-none items-center">輸出類型：</div>
            <div class="flex-1 items-center pl-4">
                <input id="output_type_1" type="radio" value="科普" name="output_type" class="w-4 h-4" checked>
                <label for="output_type_1" class="w-full py-4 ml-2">科普</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="output_type_2" type="radio" value="對話" name="output_type" class="w-4 h-4">
                <label for="output_type_2" class="w-full py-4 ml-2">對話</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="output_type_3" type="radio" value="故事" name="output_type" class="w-4 h-4">
                <label for="output_type_3" class="w-full py-4 ml-2">故事</label>
            </div>
        </div>

        <div class="flex mb-4 p-2.5">
            <div class="flex-none items-center">文章語言：</div>
            <div class="flex-1 items-center pl-4 text-center">
                <input id="language_type_1" type="radio" value="書面語" name="language_type" class="w-4 h-4" checked>
                <label for="language_type_1" class="w-full py-4 ml-2">書面語</label>
            </div>
            <div class="flex-1 items-center pl-4 text-center">
                <input id="language_type_2" type="radio" value="口語" name="language_type" class="w-4 h-4">
                <label for="language_type_2" class="w-full py-4 ml-2">口語</label>
            </div>
        </div>

        <div class="flex mb-4 p-2.5">
            <div class="flex-none items-center">目標年齡：</div>
            <div class="flex-1 items-center pl-4">
                <input id="age_range_1" type="radio" value="三至五" name="age_range" class="w-4 h-4" checked>
                <label for="age_range_1" class="w-full py-4 ml-2">3-5 歲</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="age_range_2" type="radio" value="五至八" name="age_range" class="w-4 h-4">
                <label for="age_range_2" class="w-full py-4 ml-2">5-8 歲</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="age_range_3" type="radio" value="九至十二" name="age_range" class="w-4 h-4">
                <label for="age_range_3" class="w-full py-4 ml-2">9-12 歲</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="age_range_4" type="radio" value="十三至十八" name="age_range" class="w-4 h-4">
                <label for="age_range_4" class="w-full py-4 ml-2">13-18 歲</label>
            </div>
        </div>

        <div class="flex mb-4 p-2.5">
            <div class="flex-none items-center">文章長度：</div>
            <div class="flex-1 items-center pl-4">
                <input id="num_sentence_1" type="radio" value="三" name="num_sentence" class="w-4 h-4" checked>
                <label for="num_sentence_1" class="w-full py-4 ml-2">3 句</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="num_sentence_2" type="radio" value="五" name="num_sentence" class="w-4 h-4">
                <label for="num_sentence_2" class="w-full py-4 ml-2">5 句</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="num_sentence_3" type="radio" value="十" name="num_sentence" class="w-4 h-4">
                <label for="num_sentence_3" class="w-full py-4 ml-2">10 句</label>
            </div>
        </div>

        <input type="text" id="keywords" class="w-full p-2.5 border mb-4" placeholder="期望出現的關鍵詞（選填，以逗號分隔）"/>

        <div class="flex justify-center">
        <button
            id="submit_button"
            class="w-120 p-2.5 border mb-4 hover:bg-gray-100"
            @click="greet">💡 生成文章</button>
        </div>

    </div>

    <div id="output" class="border p-4">

    </div>

  </div>

  <script>
    var endpoint = "https://zi3glvdlba6hturusxbpyzr3wq0jibsn.lambda-url.eu-west-2.on.aws/"

    var topics = [
        {"icon": "📚", "name": "學校生活"},
        {"icon": "🎉", "name": "節日及慶祝活動"},
        {"icon": "🍎", "name": "水果"},
        {"icon": "🐼", "name": "動物"},
        {"icon": "🌞", "name": "天氣現象"},
        {"icon": "🚀", "name": "太空"},
        {"icon": "🎨", "name": "藝術"},
        {"icon": "🍕", "name": "食物及飲品"},
        {"icon": "🏊‍♀️", "name": "運動項目"},
        {"icon": "🏰", "name": "世界各地建築"},
        {"icon": "🌳", "name": "自然世界"},
        {"icon": "🌎", "name": "國家地理位置"},
        {"icon": "🧬", "name": "科學知識"},
        {"icon": "👑", "name": "歷史事件及人物"},
        {"icon": "🍁", "name": "季節氣候和風景"},
        {"icon": "🎓", "name": "職業技能"},
        {"icon": "🌱", "name": "環保及永續發展"},
        {"icon": "🎧", "name": "音樂"}
    ];

    $(document).ready(function() {
        $.each(topics, function(i, topic) {
            $('#topic').append($('<option>', {
                value: topic.name,
                text: topic.icon + ' ' + topic.name
            }));
        });

        $("#submit_button").on("click", function() {
            var topic = $("#topic").val();
            var output_type = $("input[name=output_type]:checked").val();
            var language_type = $("input[name=language_type]:checked").val();
            var age_range = $("input[name=age_range]:checked").val();
            var num_sentence = $("input[name=num_sentence]:checked").val();
            var keywords = $("#keywords").val();

            if (topic == "") {
                alert("請選擇主題");
                return;
            }
            
            $("#output").html("<div class='text-center'>⚙️ 請稍等...</div>");
            $("#submit_button").prop('disabled', true);

            $.ajax({
                url: endpoint,
                type: "POST",
                data: JSON.stringify({
                    "topic": topic,
                    "output_type": output_type,
                    "language_type": language_type,
                    "age_range": age_range,
                    "num_sentence": num_sentence,
                    "keywords": keywords
                }),
                dataType: "json",
                contentType: "application/json"
            })
                .done(function(json) {
                    $("#output").empty();
                    $.each(json, function(i, sentence) {
                        row = $('<div class="flex flex-wrap mb-6">');
                        $.each(sentence, function(j, word) {
                            div = '<div class="w-16 text-center mb-2">';
                            div += word.jyutping + '<span style="color: #4488AA">' + word.tone + '</span><br/>';
                            div += '<span class="text-lg">' + word.character + '</span><br/>';
                            div += '</div>';
                            row.append(div);
                        });
                        $('#output').append($(row));
                    });
                    $("#submit_button").prop('disabled', false);
                });
        });
    });

  </script>

</body>
</html>
