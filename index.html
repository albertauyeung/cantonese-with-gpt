<!doctype html>
<html>
<head>
  <title>GPTç²µèªæ–‡ç« ç”Ÿæˆå™¨</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script
    src="https://code.jquery.com/jquery-3.7.0.min.js"
    integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
    crossorigin="anonymous"></script>

  <style>
  </style>
</head>
<body class="p-8">

  <div id="app" class="container mx-auto max-w-2xl">

    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold">GPT ç²µèªæ–‡ç« ç”Ÿæˆå™¨</h1>
        <p class="text-gray-500">åˆ©ç”¨ AI åŠ ç²µæ‹¼å­¸ç¿’ç²µèª</p>
    </div>

    <div id="input-form">
        
        <select id="topic" class="w-full p-2.5 border mb-4">
            <option selected value="">é¸æ“‡ä¸»é¡Œ</option>
        </select>

        <select id="age_range" class="w-full p-2.5 border mb-4">
            <option selected value="ä¸‰è‡³äº”">3-5 æ­²</option>
            <option value="äº”è‡³å…«">5-8 æ­²</option>
            <option value="ä¹è‡³åäºŒ">9-12 æ­²</option>
            <option value="åä¸‰è‡³åå…«">13-18 æ­²</option>
        </select>

        <select id="num_sentence" class="w-full p-2.5 border mb-4">
            <option selected value="ä¸‰">3 å¥</option>
            <option value="äº”">5 å¥</option>
            <option value="å">10 å¥</option>
        </select>

        <input type="text" id="keywords" class="w-full p-2.5 border mb-4" placeholder="é—œéµè©ï¼ˆé¸å¡«ï¼Œä»¥é€—è™Ÿåˆ†éš”ï¼‰"/>

        <div class="flex justify-center">
        <button
            id="submit_button"
            class="w-120 p-2.5 border mb-4 hover:bg-gray-100"
            @click="greet">âš™ï¸ ç”Ÿæˆæ–‡ç« </button>
        </div>

    </div>

    <div id="output" class="border p-4">

    </div>

  </div>

  <script>
    var topics = [
        {"icon": "ğŸ“š", "name": "å­¸æ ¡ç”Ÿæ´»"},
        {"icon": "ğŸ‰", "name": "ç¯€æ—¥åŠæ…¶ç¥æ´»å‹•"},
        {"icon": "ğŸ", "name": "æ°´æœ"},
        {"icon": "ğŸ¼", "name": "å‹•ç‰©"},
        {"icon": "ğŸŒ", "name": "å¤©æ°£ç¾è±¡"},
        {"icon": "ğŸš€", "name": "å¤ªç©º"},
        {"icon": "ğŸ¨", "name": "è—è¡“"},
        {"icon": "ğŸ•", "name": "é£Ÿç‰©åŠé£²å“"},
        {"icon": "ğŸŠâ€â™€ï¸", "name": "é‹å‹•é …ç›®"},
        {"icon": "ğŸ°", "name": "ä¸–ç•Œå„åœ°å»ºç¯‰"},
        {"icon": "ğŸŒ³", "name": "è‡ªç„¶ä¸–ç•Œ"},
        {"icon": "ğŸŒ", "name": "åœ‹å®¶åœ°ç†ä½ç½®"},
        {"icon": "ğŸ§¬", "name": "ç§‘å­¸çŸ¥è­˜"},
        {"icon": "ğŸ‘‘", "name": "æ­·å²äº‹ä»¶åŠäººç‰©"},
        {"icon": "ğŸ", "name": "å­£ç¯€æ°£å€™å’Œé¢¨æ™¯"},
        {"icon": "ğŸ“", "name": "è·æ¥­æŠ€èƒ½"},
        {"icon": "ğŸŒ±", "name": "ç’°ä¿åŠæ°¸çºŒç™¼å±•"},
        {"icon": "ğŸ§", "name": "éŸ³æ¨‚"}
    ];

    $(document).ready(function() {
        $.each(topics, function(i, topic) {
            $('#topic').append($('<option>', {
                value: topic.name,
                text: topic.icon + ' ' + topic.name
            }));
        });

        $("#submit_button").on("click", function() {
            var topic = $("#topic").val();
            var age_range = $("#age_range").val();
            var num_sentence = $("#num_sentence").val();
            var keywords = $("#keywords").val();

            if (topic == "") {
                alert("è«‹é¸æ“‡ä¸»é¡Œ");
                return;
            }
            if (age_range == "") {
                alert("è«‹é¸æ“‡ç›®æ¨™å¹´é½¡");
                return;
            }
            if (num_sentence == "") {
                alert("è«‹é¸æ“‡æ–‡ç« é•·åº¦");
                return;
            }

            $("#output").html("<div class='text-center'>âš™ï¸ ç”Ÿæˆæ–‡ç« ä¸­...</div>");

            $.ajax({
                url: "https://azure-personal-apps.azurewebsites.net/api/cantonesewithgpt",
                type: "POST",
                data: JSON.stringify({
                    "topic": topic,
                    "age_range": age_range,
                    "num_sentence": num_sentence,
                    "keywords": keywords
                }),
                dataType: "json",
                contentType: "application/json"
            })
                .done(function(json) {
                    $("#output").empty();
                    $.each(json, function(i, sentence) {
                        row = $('<div class="flex flex-wrap mb-6">');
                        $.each(sentence, function(j, word) {
                            div = '<div class="w-16 text-center mb-2">';
                            div += word.jyutping + '<span style="color: #4488AA">' + word.tone + '</span><br/>';
                            div += '<span class="text-lg">' + word.character + '</span><br/>';
                            div += '</div>';
                            row.append(div);
                        });
                        $('#output').append($(row));
                    });
                });
        });
    });

  </script>

</body>
</html>
