<!doctype html>
<html>
<head>
  <title>GPTç²µèªæ–‡ç« ç”Ÿæˆå™¨</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script
    src="https://code.jquery.com/jquery-3.7.0.min.js"
    integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
    crossorigin="anonymous"></script>

  <style>
  </style>
</head>
<body class="p-8">

  <div id="app" class="container mx-auto max-w-2xl">

    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold">GPT ç²µèªæ–‡ç« ç”Ÿæˆå™¨</h1>
        <p class="text-gray-500">åˆ©ç”¨ AI åŠ ç²µæ‹¼å­¸ç¿’ç²µèª</p>
    </div>

    <div id="input-form">
        
        <select id="topic" class="w-full p-2.5 border mb-4">
            <option selected value="">é¸æ“‡ä¸»é¡Œ</option>
        </select>

        <div class="flex mb-4 p-2.5">
            <div class="flex-none items-center">è¼¸å‡ºé¡å‹ï¼š</div>
            <div class="flex-1 items-center pl-4">
                <input id="output_type_1" type="radio" value="ç§‘æ™®" name="output_type" class="w-4 h-4" checked>
                <label for="output_type_1" class="w-full py-4 ml-2">ç§‘æ™®</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="output_type_2" type="radio" value="å°è©±" name="output_type" class="w-4 h-4">
                <label for="output_type_2" class="w-full py-4 ml-2">å°è©±</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="output_type_3" type="radio" value="æ•…äº‹" name="output_type" class="w-4 h-4">
                <label for="output_type_3" class="w-full py-4 ml-2">æ•…äº‹</label>
            </div>
        </div>

        <div class="flex mb-4 p-2.5">
            <div class="flex-none items-center">æ–‡ç« èªè¨€ï¼š</div>
            <div class="flex-1 items-center pl-4 text-center">
                <input id="language_type_1" type="radio" value="æ›¸é¢èª" name="language_type" class="w-4 h-4" checked>
                <label for="language_type_1" class="w-full py-4 ml-2">æ›¸é¢èª</label>
            </div>
            <div class="flex-1 items-center pl-4 text-center">
                <input id="language_type_2" type="radio" value="å£èª" name="language_type" class="w-4 h-4">
                <label for="language_type_2" class="w-full py-4 ml-2">å£èª</label>
            </div>
        </div>

        <div class="flex mb-4 p-2.5">
            <div class="flex-none items-center">ç›®æ¨™å¹´é½¡ï¼š</div>
            <div class="flex-1 items-center pl-4">
                <input id="age_range_1" type="radio" value="ä¸‰è‡³äº”" name="age_range" class="w-4 h-4" checked>
                <label for="age_range_1" class="w-full py-4 ml-2">3-5 æ­²</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="age_range_2" type="radio" value="äº”è‡³å…«" name="age_range" class="w-4 h-4">
                <label for="age_range_2" class="w-full py-4 ml-2">5-8 æ­²</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="age_range_3" type="radio" value="ä¹è‡³åäºŒ" name="age_range" class="w-4 h-4">
                <label for="age_range_3" class="w-full py-4 ml-2">9-12 æ­²</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="age_range_4" type="radio" value="åä¸‰è‡³åå…«" name="age_range" class="w-4 h-4">
                <label for="age_range_4" class="w-full py-4 ml-2">13-18 æ­²</label>
            </div>
        </div>

        <div class="flex mb-4 p-2.5">
            <div class="flex-none items-center">æ–‡ç« é•·åº¦ï¼š</div>
            <div class="flex-1 items-center pl-4">
                <input id="num_sentence_1" type="radio" value="ä¸‰" name="num_sentence" class="w-4 h-4" checked>
                <label for="num_sentence_1" class="w-full py-4 ml-2">3 å¥</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="num_sentence_2" type="radio" value="äº”" name="num_sentence" class="w-4 h-4">
                <label for="num_sentence_2" class="w-full py-4 ml-2">5 å¥</label>
            </div>
            <div class="flex-1 items-center pl-4">
                <input id="num_sentence_3" type="radio" value="å" name="num_sentence" class="w-4 h-4">
                <label for="num_sentence_3" class="w-full py-4 ml-2">10 å¥</label>
            </div>
        </div>

        <input type="text" id="keywords" class="w-full p-2.5 border mb-4" placeholder="æœŸæœ›å‡ºç¾çš„é—œéµè©ï¼ˆé¸å¡«ï¼Œä»¥é€—è™Ÿåˆ†éš”ï¼‰"/>

        <div class="flex justify-center">
        <button
            id="submit_button"
            class="w-120 p-2.5 border mb-4 hover:bg-gray-100"
            @click="greet">ğŸ’¡ ç”Ÿæˆæ–‡ç« </button>
        </div>

    </div>

    <div id="output" class="border p-4">

    </div>

  </div>

  <script>
    var endpoint = "http://localhost:7071/api"
    //var endpoint = "https://azure-personal-apps.azurewebsites.net/api"

    var topics = [
        {"icon": "ğŸ“š", "name": "å­¸æ ¡ç”Ÿæ´»"},
        {"icon": "ğŸ‰", "name": "ç¯€æ—¥åŠæ…¶ç¥æ´»å‹•"},
        {"icon": "ğŸ", "name": "æ°´æœ"},
        {"icon": "ğŸ¼", "name": "å‹•ç‰©"},
        {"icon": "ğŸŒ", "name": "å¤©æ°£ç¾è±¡"},
        {"icon": "ğŸš€", "name": "å¤ªç©º"},
        {"icon": "ğŸ¨", "name": "è—è¡“"},
        {"icon": "ğŸ•", "name": "é£Ÿç‰©åŠé£²å“"},
        {"icon": "ğŸŠâ€â™€ï¸", "name": "é‹å‹•é …ç›®"},
        {"icon": "ğŸ°", "name": "ä¸–ç•Œå„åœ°å»ºç¯‰"},
        {"icon": "ğŸŒ³", "name": "è‡ªç„¶ä¸–ç•Œ"},
        {"icon": "ğŸŒ", "name": "åœ‹å®¶åœ°ç†ä½ç½®"},
        {"icon": "ğŸ§¬", "name": "ç§‘å­¸çŸ¥è­˜"},
        {"icon": "ğŸ‘‘", "name": "æ­·å²äº‹ä»¶åŠäººç‰©"},
        {"icon": "ğŸ", "name": "å­£ç¯€æ°£å€™å’Œé¢¨æ™¯"},
        {"icon": "ğŸ“", "name": "è·æ¥­æŠ€èƒ½"},
        {"icon": "ğŸŒ±", "name": "ç’°ä¿åŠæ°¸çºŒç™¼å±•"},
        {"icon": "ğŸ§", "name": "éŸ³æ¨‚"}
    ];

    $(document).ready(function() {
        $.each(topics, function(i, topic) {
            $('#topic').append($('<option>', {
                value: topic.name,
                text: topic.icon + ' ' + topic.name
            }));
        });

        $("#submit_button").on("click", function() {
            var topic = $("#topic").val();
            var output_type = $("input[name=output_type]:checked").val();
            var language_type = $("input[name=language_type]:checked").val();
            var age_range = $("input[name=age_range]:checked").val();
            var num_sentence = $("input[name=num_sentence]:checked").val();
            var keywords = $("#keywords").val();

            if (topic == "") {
                alert("è«‹é¸æ“‡ä¸»é¡Œ");
                return;
            }
            
            $("#output").html("<div class='text-center'>âš™ï¸ è«‹ç¨ç­‰...</div>");
            $("#submit_button").prop('disabled', true);

            $.ajax({
                url: endpoint + "/cantonesewithgpt",
                type: "POST",
                data: JSON.stringify({
                    "topic": topic,
                    "output_type": output_type,
                    "language_type": language_type,
                    "age_range": age_range,
                    "num_sentence": num_sentence,
                    "keywords": keywords
                }),
                dataType: "json",
                contentType: "application/json"
            })
                .done(function(json) {
                    $("#output").empty();
                    $.each(json, function(i, sentence) {
                        row = $('<div class="flex flex-wrap mb-6">');
                        $.each(sentence, function(j, word) {
                            div = '<div class="w-16 text-center mb-2">';
                            div += word.jyutping + '<span style="color: #4488AA">' + word.tone + '</span><br/>';
                            div += '<span class="text-lg">' + word.character + '</span><br/>';
                            div += '</div>';
                            row.append(div);
                        });
                        $('#output').append($(row));
                    });
                    $("#submit_button").prop('disabled', false);
                });
        });
    });

  </script>

</body>
</html>
